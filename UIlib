-- // version: 1.0.5 (Fixed Aesthetics) -- yes
local Library = {}
local UIS = game:GetService("UserInputService")
local TS = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

function Library:CreateWindow(Settings)
    local Window = {Tabs = {}}
    local Name = Settings.Name or "Rayfield Hub"
    
    local Screen = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
    Screen.Name = "Rayfield_Suite"
    Screen.ResetOnSpawn = false
    Screen.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    -- // MAIN WINDOW //
    local Main = Instance.new("CanvasGroup", Screen)
    Main.Size = UDim2.new(0, 500, 0, 420)
    Main.Position = UDim2.new(0.5, -250, 0.5, -210)
    Main.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)
    
    local MainStroke = Instance.new("UIStroke", Main)
    MainStroke.Color = Color3.fromRGB(45, 45, 45)
    MainStroke.Thickness = 1.2

    -- // HEADER //
    local Header = Instance.new("Frame", Main)
    Header.Size = UDim2.new(1, 0, 0, 55)
    Header.BackgroundTransparency = 1
    
    local Title = Instance.new("TextLabel", Header)
    Title.Text = Name; Title.Size = UDim2.new(1, -150, 1, 0); Title.Position = UDim2.new(0, 18, 0, 0)
    Title.TextColor3 = Color3.fromRGB(255, 255, 255); Title.Font = Enum.Font.GothamBold; Title.TextSize = 18
    Title.TextXAlignment = Enum.TextXAlignment.Left; Title.BackgroundTransparency = 1

    -- Control Icons (Top Right)
    local Controls = Instance.new("Frame", Header)
    Controls.Size = UDim2.new(0, 100, 1, 0); Controls.Position = UDim2.new(1, -110, 0, 0); Controls.BackgroundTransparency = 1
    local ControlList = Instance.new("UIListLayout", Controls); ControlList.FillDirection = "Horizontal"; ControlList.HorizontalAlignment = "Right"; ControlList.VerticalAlignment = "Center"; ControlList.Padding = UDim.new(0, 12)

    local function AddControl(id)
        local icon = Instance.new("ImageButton", Controls)
        icon.Size = UDim2.new(0, 20, 0, 20); icon.BackgroundTransparency = 1; icon.Image = "rbxassetid://"..id; icon.ImageColor3 = Color3.fromRGB(150, 150, 150)
        return icon
    end
    AddControl("10747384394") -- Close
    AddControl("10734896206") -- Minimize

    -- // HORIZONTAL TAB BAR //
    local TabBar = Instance.new("ScrollingFrame", Main)
    TabBar.Size = UDim2.new(1, -30, 0, 42); TabBar.Position = UDim2.new(0, 15, 0, 60); TabBar.BackgroundTransparency = 1; TabBar.ScrollBarThickness = 0
    local TabList = Instance.new("UIListLayout", TabBar); TabList.FillDirection = "Horizontal"; TabList.Padding = UDim.new(0, 10)

    -- Content
    local Container = Instance.new("Frame", Main)
    Container.Size = UDim2.new(1, -36, 1, -135); Container.Position = UDim2.new(0, 18, 0, 120); Container.BackgroundTransparency = 1

    -- Smooth Tween Drag
    local dragging, dragStart, startPos
    Header.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true; dragStart = input.Position; startPos = Main.Position end
    end)
    UIS.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            TS:Create(Main, TweenInfo.new(0.12, Enum.EasingStyle.Quart), {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}):Play()
        end
    end)
    UIS.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end end)

    function Window:CreateTab(TabName, IconID)
        local TabBtn = Instance.new("TextButton", TabBar)
        TabBtn.Size = UDim2.new(0, 110, 1, 0); TabBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 35); TabBtn.Text = "      "..TabName
        TabBtn.TextColor3 = Color3.fromRGB(160, 160, 160); TabBtn.Font = "GothamMedium"; TabBtn.TextSize = 14; TabBtn.TextXAlignment = "Left"
        Instance.new("UICorner", TabBtn).CornerRadius = UDim.new(0, 10)
        Instance.new("UIStroke", TabBtn).Color = Color3.fromRGB(50, 50, 50)

        local Icon = Instance.new("ImageLabel", TabBtn)
        Icon.Size = UDim2.new(0, 18, 0, 18); Icon.Position = UDim2.new(0, 10, 0.5, -9); Icon.BackgroundTransparency = 1; Icon.Image = "rbxassetid://"..IconID; Icon.ImageColor3 = Color3.fromRGB(160, 160, 160)

        local Page = Instance.new("ScrollingFrame", Container)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.Visible = false; Page.BackgroundTransparency = 1; Page.ScrollBarThickness = 0
        Instance.new("UIListLayout", Page).Padding = UDim.new(0, 10)

        TabBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Container:GetChildren()) do if v:IsA("ScrollingFrame") then v.Visible = false end end
            for _, v in pairs(TabBar:GetChildren()) do if v:IsA("TextButton") then TS:Create(v, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(35, 35, 35), TextColor3 = Color3.fromRGB(160, 160, 160)}):Play(); v.ImageLabel.ImageColor3 = Color3.fromRGB(160, 160, 160) end end
            Page.Visible = true; TS:Create(TabBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(230, 230, 230), TextColor3 = Color3.fromRGB(30, 30, 30)}):Play(); Icon.ImageColor3 = Color3.fromRGB(30, 30, 30)
        end)
        
        if #TabBar:GetChildren() == 2 then Page.Visible = true; TabBtn.BackgroundColor3 = Color3.fromRGB(230, 230, 230); TabBtn.TextColor3 = Color3.fromRGB(30, 30, 30); Icon.ImageColor3 = Color3.fromRGB(30, 30, 30) end

        local Elements = {Page = Page}

        function Elements:Toggle(txt, cb)
            local TFrame = Instance.new("Frame", self.Page)
            TFrame.Size = UDim2.new(1, 0, 0, 48); TFrame.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
            Instance.new("UICorner", TFrame).CornerRadius = UDim.new(0, 8)
            Instance.new("UIStroke", TFrame).Color = Color3.fromRGB(45, 45, 45)
            
            local TText = Instance.new("TextLabel", TFrame)
            TText.Text = "  "..txt; TText.Size = UDim2.new(1,0,1,0); TText.TextColor3 = Color3.fromRGB(220,220,220); TText.Font = "Gotham"; TText.TextSize = 14; TText.TextXAlignment = "Left"; TText.BackgroundTransparency = 1
            
            local Switch = Instance.new("TextButton", TFrame)
            Switch.Size = UDim2.new(0, 40, 0, 22); Switch.Position = UDim2.new(1, -50, 0.5, -11); Switch.BackgroundColor3 = Color3.fromRGB(55, 55, 55); Switch.Text = ""; Instance.new("UICorner", Switch).CornerRadius = UDim.new(1,0)
            local Dot = Instance.new("Frame", Switch); Dot.Size = UDim2.new(0, 16, 0, 16); Dot.Position = UDim2.new(0, 3, 0.5, -8); Dot.BackgroundColor3 = Color3.new(1,1,1); Instance.new("UICorner", Dot).CornerRadius = UDim.new(1,0)
            
            local s = false
            Switch.MouseButton1Click:Connect(function()
                s = not s
                TS:Create(Switch, TweenInfo.new(0.2), {BackgroundColor3 = s and Color3.fromRGB(0, 140, 255) or Color3.fromRGB(55, 55, 55)}):Play()
                TS:Create(Dot, TweenInfo.new(0.2), {Position = s and UDim2.new(1, -19, 0.5, -8) or UDim2.new(0, 3, 0.5, -8)}):Play()
                cb(s)
            end)
            return self
        end
        return Elements
    end
    return Window
end

return Library
